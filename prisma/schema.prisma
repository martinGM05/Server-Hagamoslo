// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Roles{
  id            Int         @id @default(autoincrement())
  rol           String
  Usuarios      Usuario[]
}

model Usuario{
  id            Int         @id @default(autoincrement())
  nombre        String
  correo        String      @unique
  contrasena    String
  urlFoto       String
  numero        String
  localizacion  String
  idRol         Int
  Rol           Roles       @relation(fields: [idRol], references: [id])
  descripcion   String?     @default("")
  valoracion    Int?        @default(0)
  tags          Servicio[]
  comentarioUsuario  ComentarioUsuario[]
}

model Comentario{
  id            Int         @id @default(autoincrement())
  comentario    Json
  ComentarioUsuario ComentarioUsuario[]
}

model ComentarioUsuario{
  id            Int         @default(autoincrement())
  idUsuario     Int
  idComentario  Int
  Usuario       Usuario     @relation(fields: [idUsuario], references: [id])
  Comentario    Comentario  @relation(fields: [idComentario], references: [id])
  @@id([idUsuario, idComentario])
}

model Servicio{
  id            Int         @default(autoincrement())
  tag           Tag         @relation(fields: [idTag], references: [id])
  idTag         Int
  usuario       Usuario     @relation(fields: [idUsuario], references: [id])
  idUsuario     Int
  @@id([idTag, idUsuario])
}

model Tag{
  id            Int         @id @default(autoincrement())
  nombre        String
  icono         String
  usuarios      Servicio[]
}